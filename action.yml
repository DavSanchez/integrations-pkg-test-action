name: 'Test packages installation'
description: 'This action test packages installation in Suse Centos Debian'
inputs:
  TAG: 
    description: 'Tag of the integration to test'
    required: true
    default: '0.0.0'
  INTEGRATION: 
    description: 'Integration to test'
    required: true
    default: 'nri-test'
  TEST_EXISTENCE:
    description: 'file to test es "/var /bin/nri-test"'
    required: false
    default: ''
runs:
  using: "composite"
  steps: 
    - run: |
        docker build -f $GITHUB_ACTION_PATH/dockerfiles-test/Dockerfile-suse    --build-arg TAG="${{ inputs.TAG }}" --build-arg INTEGRATION="${{ inputs.INTEGRATION }}" --build-arg TEST_EXISTENCE="${{ inputs.TEST_EXISTENCE }}" .
        docker build -f $GITHUB_ACTION_PATH/dockerfiles-test/Dockerfile-centos  --build-arg TAG="${{ inputs.TAG }}" --build-arg INTEGRATION="${{ inputs.INTEGRATION }}" --build-arg TEST_EXISTENCE="${{ inputs.TEST_EXISTENCE }}" .
        docker build -f $GITHUB_ACTION_PATH/dockerfiles-test/Dockerfile-debian  --build-arg TAG="${{ inputs.TAG }}" --build-arg INTEGRATION="${{ inputs.INTEGRATION }}" --build-arg TEST_EXISTENCE="${{ inputs.TEST_EXISTENCE }}" .
      shell: bash
